{% extends 'base.html' %}

{% block content %}
<div class="max-w-3xl mx-auto p-6 bg-white rounded-xl shadow-md mt-10">
    <h2 class="text-2xl font-bold mb-6 text-gray-800">Approve Leave Request</h2>

    <div class="mb-4">
        <p><strong>Employee:</strong> {{ leave_request.user.get_full_name }}</p>
        <p><strong>Leave Type:</strong> {{ leave_request.leave_type.name }}</p>
        <p><strong>Dates:</strong> {{ leave_request.start_date }} to {{ leave_request.end_date }}</p>
        <p><strong>Total Days:</strong> {{ leave_request.total_days }}</p>
    </div>

    {% if not has_balance and leave_request.leave_type.is_paid %}
        <div class="mb-4 p-4 bg-yellow-100 border border-yellow-300 rounded">
            <p class="text-yellow-800 font-semibold">Insufficient leave balance.</p>
            <form method="post">
                {% csrf_token %}
                <p class="mt-2">Do you want to automatically convert this to Loss of Pay?</p>
                <input type="hidden" name="auto_convert" value="yes">
                <button type="submit" class="mt-3 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                    Yes, Convert and Approve
                </button>
            </form>
        </div>
    {% else %}
        <form method="post">
            {% csrf_token %}
            <button type="submit" class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">
                Approve Leave
            </button>
        </form>
    {% endif %}

    <a href="{% url 'aps_leave:hr_leave_view' %}" class="inline-block mt-6 text-blue-600 hover:underline">
        ‚Üê Back to Approval List
    </a>
</div>
{% endblock %}
